---
title: Java对接iOS内购以及各个渠道微信支付
date: 2019-05-29 23:11:29
tags: pay
category: pay 
---

![](jvm-Java对接iOS内购以及各个渠道微信支付/pay.png)

最近因为公司业务需要，要对接支付这一块，我也是第一次对接第三方支付相关，因为是微信，iOS 缘故，对接前感觉可能会比较容易，毕竟这两家的东西用的人肯定很多，但是在具体的对接过程中还是碰到了很多的问题。

<!-- more -->

##### iOS 内购

iOS 对接相对来说比较容易点，客户端 SDK 已经集成了支付相关的很多流程，这里服务端只是做一个校验，保存相关数据和业务操作就可以。

###### 购买流程：
```
1. app 购买成功之后，将 receipt-data 提交给自己的应用服务器
2. 应用服务器拿到数据之后解析后拿着数据去苹果服务器验证。
3. 苹果返回验证结果给应用服务器，应用服务器返回给 app。
```
####### 问题
```
1. 应用服务器到苹果服务器验证数时会有两个环境，沙盒测试环境和正式环境，这里在保存数据的时候要注意标记支付环境，方便后续统计数据。
2. 苹果服务器访问是真慢。

```

