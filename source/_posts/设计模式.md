---
title: 设计模式
date: 2021-03-27 23:28:55
tags: 设计模式
category: 设计模式
comments: true
---

![Photo by sisko1701 on wallhaven.cc](/template.png)

设计模式是前人们总结出来一类问题的最优解，曾经看过一篇文章这样说的「假如你从来没有看过设计模式，但是当你真的写了很多代码之后，发现优化和抽象之后还是会对应到相应的设计模式上面去」既然已经总结出了好的方法，那我们也应该好好吸收理解，加以利用。能在真是的项目中投入使用，降低开发难度和成本。当然设计模式实在合适的业务中使用才能发挥它的价值，不要为了设计模式而使用设计模式。在真实场景中有时候会得不偿失。

<!--more-->

## 模板方法

### 概念

字面意思来理解就是说把完成一项事情所要做的过程抽象成一个模板。

#### 例子

比如我们去游乐场可以大致分为以下几个步骤：

![流程](/flow.jpeg)

上面几个流程其实前 3 个和最后一个大家做的事情是一样的，抽象成代码就是 窗口买票方法，检票入场方法，出口回家方法。但是玩这里是不同的，因为每个人进来之后有的人喜欢刺激去玩过山车🎢，有的比较怂「我？」就去玩儿童项目。哈哈，总之 玩这个方法对于每个人来说都是变动的，所以把它抽象出来，交给子类，也就是每个人去实现自己的玩方法，其他方法放在父类中，统一处理，这就是模板方法，简单而实用。

### 实现

接着上面游乐场的例子，用代码实现的话是下面这样的。

#### 游乐场

```
/**
 * @author ck
 */
public abstract class Playground {

    /**
     * 游玩所有流程
     */
    public void playTemplate() {
        buyTicket();
        checkTicket();
        play();
        goHome();
    }

    /**
     * 窗口统一买票
     */
    public void buyTicket() {
        System.out.println("我买到双人票了！");
    }

    /**
     * 统一排队检票
     */
    public void checkTicket() {
        System.out.println("检票入场了");
    }

    /**
     * 统一出口离开
     */
    public void goHome() {
        System.out.println("我们从出口回家了");
    }

    /**
     * 玩：每个人玩法都不一样
     */
    public abstract void play();
}
```

#### 游客

李明

```
public class Liming extends Playground{
    @Override
    public void play() {
        System.out.println("我先玩了过山车🎢，然后又玩了跳楼机。。。。哈哈哈");
    }
}
```

张三

```
public class Zhangsan extends Playground{

    @Override
    public void play() {
        System.out.println("儿童项目真好玩😄");
    }
}
```

#### 测试

让两个游客都执行相同的方法，但是看到的模板中执行的结果是不一样的。

```
public class Main {

    public static void main(String[] args) {
        Liming liming = new Liming();
        liming.playTemplate();
        System.out.println("=================");
        Zhangsan zhangsan = new Zhangsan();
        zhangsan.playTemplate();
    }
}
```

#### 结果

```
我买到双人票了！
检票入场了
我先玩了过山车🎢，然后又玩了跳楼机。。。。哈哈哈
我们从出口回家了
=================
我买到双人票了！
检票入场了
儿童项目真好玩😄
我们从出口回家了

Process finished with exit code 0
```

### 总结
可以看得出来，模板的好处就是将不变的抽离出来，放在一个父类中，将变化的留出入口，让不同的子类是实现自己对应的方法。简单且实用，我之前在工作中有对接第三方提现业务，但是因为财务和运营各方原因「对内这样说的」接了4家左右的第三方公司，而且说后续还可能陆续会有。在这个工程中我发现很多方法，比如创建提现订单，创建提现记录，提现信息校验等一些基础方法是不变的，而请求第三发发起提现，实名认证，查询在第三方账户余额是不一样的。所以采用了模板的方式来实现这个需求，让代码的冗余度减少很多，完美的解决了问题。





***

慢慢更新，争取所有的模式都能用到我自己真是工作中，并带来正收益。

<center></center>